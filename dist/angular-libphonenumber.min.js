/**
 * angular-libphonenumber
 * Nathan Hammond's libphonenumber ported to an angular filter
 * @version v0.0.3
 * @link https://github.com/cwill747/angular-libphonenumber
 * @license Apache v2
 */
!function(a){a.module("cwill747.phonenumber",[]).directive("phoneNumber",["$log",function(a){function b(a){return a?a.replace(/([^0-9|+])/g,""):a}function c(b,c){var d=b;try{d=phoneUtils.formatAsTyped(b,c)}catch(e){a.debug(e)}return d}return{restrict:"A",require:"?ngModel",scope:{countryCode:"="},controllerAs:"",controller:function(){this.countryCode=this.countryCode||"us"},link:function(d,e,f,g){function h(a){return g.$isEmpty(a)?a:c(b(a),d.countryCode)}function i(a){if(g.$isEmpty(a))return a;var e=b(a),f="";return f=e.length>1?c(e,d.countryCode):e,g.$viewValue!==f&&(g.$setViewValue(f),g.$render()),b(f)}function j(b){var c=!1;try{c=phoneUtils.isValidNumberForRegion(b,d.countryCode)}catch(e){a.debug(e)}var f=g.$isEmpty(b)||c;return g.$setValidity("phoneNumber",f),b}d.$watch("countryCode",function(){g.$modelValue=g.$viewValue+" "}),g.$formatters.push(h),g.$formatters.push(j),g.$parsers.push(i),g.$parsers.push(j)}}}])}(angular);