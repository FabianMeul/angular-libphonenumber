/**
 * angular-libphonenumber
 * Nathan Hammond's libphonenumber ported to an angular filter
 * @version v0.0.4
 * @link https://github.com/cwill747/angular-libphonenumber
 * @license Apache-2.0
 */
!function(e){e.module("cwill747.phonenumber",[]).directive("phoneNumber",["$log",function(e){function t(e){return e?e.replace(/([^0-9|+])/g,""):e}function n(t,n){var r=t;try{r=phoneUtils.formatAsTyped(t,n)}catch(o){e.debug(o)}return r}return{restrict:"A",require:"?ngModel",scope:{countryCode:"="},controllerAs:"",controller:function(){this.countryCode=this.countryCode||"us"},link:function(r,o,u,i){function c(e){return i.$isEmpty(e)?e:n(t(e),r.countryCode)}function l(e){if(i.$isEmpty(e))return e;var n=s(e);return t(n)}function s(e){var o=t(e),u="";return u=o&&o.length>1?n(o,r.countryCode):o}function a(t){var n=!1;try{n=phoneUtils.isValidNumberForRegion(t,r.countryCode)}catch(o){e.debug(o)}var u=i.$isEmpty(t)||n;return i.$setValidity("phoneNumber",u),t}r.$watch("countryCode",function(){i.$modelValue=i.$viewValue+" "}),o.on("keyup",function(){var e=i.$viewValue,t=s(e);if(e&&t){var n=this.selectionStart,r=this.selectionEnd+t.length-e.length;e.length<t.length&&(n+=t.length-e.length),e!==t&&(i.$setViewValue(t),i.$render()),this.setSelectionRange(n,r)}}),i.$formatters.push(c),i.$formatters.push(a),i.$parsers.push(l),i.$parsers.push(a)}}}])}(angular);